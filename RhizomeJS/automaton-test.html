<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/automaton.js"></script>
    
    <script>

        var state1 = {
            eventSink: undefined,
            enter: function() {
                console.log("s1: enter");
            },
            work : function() {
                console.log("s1: working on the " + this.plant.name);
                this.eventSink.castEvent("e1");
            }
        };
        
        var state2 = {
            eventSink: undefined,
            exit : function() {
                console.log("s2: exit");
            },
            work : function() {
                console.log("s2: working on the " + this.plant.name);
                this.eventSink.castEvent("e2");
            }
        };

        var plant = { name: "Plant" };

        var automaton = new Automaton(plant);
        automaton.work = function() {
            this.state().work();
        };

        automaton.addState("s1", state1);
        automaton.addState("s2", state2);
        automaton.setState("s1");

        automaton.addEdge("s1", "e1", "s2");
        automaton.addEdge("s2", "e2", "s1");

//        console.log(automaton.stateId());
        automaton.work();
//        console.log(automaton.stateId());
        automaton.work();
//        console.log(automaton.stateId());

    </script>
</head>
<body>

</body>
</html>
